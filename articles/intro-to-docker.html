<!DOCTYPE html>
<head>
	<meta charset="utf-8"/>
	<title>Soladev</title>
	<link rel="stylesheet" type="text/css" href="../style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet"> 
	<script type="text/javascript" src="../jquery-3.2.1.js"></script>
</head>
<body>
	<nav>
		<a href="../index.html">ARTICLES</a>
		<a href="./ctf">SOLA_CTF</a>
		<h1><a href="../index.html">Soladev</a></h1>
		<a href="../friends.html">LES AMIS</a>
		<a href="../me.html">QUI SUIS-JE</a> 
	</nav>
	<header>
	</header>
	<div class="content">
        <div class="article">
            <h2>Introduction √† Docker üê≥</h2>
            <p>Avant de parler de Docker, il faut d√©j√† que j'explique ce qu'est un "container".</p>
            <h4>Les containers</h4>
            <p>Aujourd'hui, dans tous les domaines de l'informatique, la virtualisation s'impose comme une technologie pr√©dominante et ce quelque soit le domaine. Mais faire tourner des syst√®mes d'exploitation entiers sur un ordinateur ou un serveur s'av√®re tr√®s couteux en terme de ressources. C'est (entre autre) pour pallier √† ce probl√®me qu'ont √©t√© invent√©s les "containers".</p>
            <p>En termes techniques, les containers sont semblables aux machines virtuelles, √† la majeure diff√©rence que <b>certaines fonctionnalit√©s du kernel sont communes au syst√®me h√¥te ainsi qu'√† tous les containers</b>, alors que <b>chaque machine virtuelle poss√®de son propre kernel.</b></p>
            <img src="../medias/docker-vs-vm.png" lat="docker-vs-vm"></img> 
            <p>De fa√ßon imag√©e, les machines virtuelles (√† gauche) ont toutes un syst√®me d'exploitation, assez lourd, ainsi que les applications √† faire tourner sur la machine virtuelle. Un container (√† droite) ne va que faire tourner l'application dans son propre environnement isol√©.</p>
            <p>Pour coordonner le tout, les machines virtuelles utilisent un hyperviseur (tel que VMWare, Virtualbox ou Hyper-V). Les containers utilisent eux un "engine", comme par exemple <b>Docker</b>.</p>
            <h4>Docker</h4>
            <p>Docker est donc un logiciel permettant l'ex√©cution de programmes dans des containers. Il a √©t√© cr√©√© par Solomon Hykes et il est aujourd'hui √©crit en Go √† travers un programme devenu standard industriel pour les containers, appel√© <b>containerd</b>. Ce dernier est maintenu par plus de 200 contributeurs sur Github. En gros, containerd est le composant "bas-niveau" sur lequel se base l'application ex√©cutable Docker. <a href="https://docs.docker.com/install/" target="_blank">Voici le lien vers le guide d'installation (en anglais).</a></p>
            <p>La fa√ßon de faire de Docker est relativement simple et elle l'est d'autant plus si vous avez d√©j√† utilis√© des machines virtuelles. Tout d'abord, il vous faut une "image". Il s'agit grossi√®rement d'un √©quivalent aux "images disques" d'une machine virtuelle, car elle contient les fonctionnalit√©s de base du container. Un fonctionnalit√© tr√®s pratique de Docker est qu'il est possible de r√©cup√©rer des images sur Internet, √† travers le <b>Docker Hub</b>. Par exemple, pour r√©cup√©rer une image d'Ubuntu dans sa version 19.10 :</p>
            <code># docker pull ubuntu:19.10</code> 
            <p>Et voil√†, vous avez une image d'Ubuntu sur votre PC ! Pour la lancer, il vous faut juste faire la commande suivante :</p>
            <code># docker run -it ubuntu:19.10</code>
            <p>Il faut donc juste pr√©ciser le nom de l'image. L'option "it" permet d'ouvrir un terminal et de le garder ouvert. On se retrouve avec un prompt comme celui-ci :</p>
            <code>root@2f72aecaf471:/# </code>
            <p>Depuis ce terminal, on peut ex√©cuter de commandes qui seront ex√©cut√©es dans le container. Pour en sortir, il faut faire la commande "exit" ou alors Ctrl+C.</p>
            <p>Une fois sorti du container, on peut lister tous les containers cr√©√©s par Docker : </p>
            <code>
                # docker ps -a<br/>
                <i>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br/>
                2f72aecaf471        ubuntu:19.10        "/bin/bash"         3 minutes ago       Exited (0) 2 minutes ago                       quizzical_ride</i>
            </code>
            <p>On remarque que notre container est arr√™t√©, tout simplement parce que chaque container poss√®de une commande d'entr√©e qui, si elle est stopp√©e, arr√™te le container. Pour notre exemple, il s'agit de la commande "/bin/bash", soit le shell bash dans lequel nous √©tions pr√©c√©demment.</p>
            <h4>Docker Hub</h4>
            <p>J'en ai parl√© rapidement pr√©c√©demment, le <a href="https://hub.docker.com" target="_blank">Docker Hub</a> est sans aucun doute un √©norme avantage de Docker. Il vous permet de r√©cup√©rer des images facilement sur Internet et il est nourri par la communaut√©. Cela fait qu'il est possible de trouver des images de tout et n'importe quoi dessus. Imaginons par exemple que vous voulez faire un serveur web Apache. Sur votre PC, il aurait fallu installer Apache, ses d√©pendances, g√©rer les configurations et les ports si le port 80 est d√©j√† utilis√©... Mais il existe sur le Docker Hub une image Apache vous permettant de lancer rapidement un serveur web ! Il suffit de faire :</p>
            <code># docker run -d -p 8000:80 -v my-website/:/var/www/html httpd</code>
            <p>Et c'est tout ! Pour expliquer les options : "<b>-d</b>" permet de lacer le container en mode d√©tach√©, pour le laisser tourner en arri√®re-plan. "<b>-p 8000:80</b>" permet d'assigner le port 8000 de la machine h√¥te au port 80 du container car par d√©faut, aucun port ouvert par le container ne le sera sur la machine h√¥te. Enfin, "<b>-v my-website/:/var/www/html</b>" permet d'assigner le dossier my-website/ de la machine h√¥te au dossier /var/www/html sur le serveur Apache. On remarque aussi que l'on a pas utilis√© la commande "docker pull" pour l'image, tout simplement parce que vu que Docker n'a pas trouv√© l'image localement, il est directement all√© la chercher sur le Docker Hub. Docker fournit aussi une syntaxe logique pour toutes les assignations entre h√¥te et container, √† savoir que ce sera toujours sous la forme "<b>h√¥te:container</b>".</p>
            <p>Ce petit serveur web est donc maintenant accessible √† l'adresse <a href="http://localhost:8000" target="_blank">http://localhost:8000</a> !</p>
            <p>Il faut savoir qu'avec des fichiers appel√©s "Dockerfile", il est possible de construire soit-m√™me des images et de les publier sur le Docker Hub. J'en parlerais plus en d√©tail dans un futur article, tout comme des fonctionnalit√©s plus avanc√©es comme docker-compose et docker-swarm ! En attendant, vous pouvez profiter du peu de reste de ce site :D</p>
            </div>        
	</div>
	<footer>
		Ce site est mise √† disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licence Creative Commons Attribution</a>. <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
	</footer>
</body>
